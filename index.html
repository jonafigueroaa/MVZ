<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Curricular MVZ</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f7f9fc;
      color: #333;
      margin: 0;
      padding: 1rem;
    }
    h2 {
      margin-top: 2rem;
      font-size: 1.5rem;
    }
    .year {
      margin-bottom: 2rem;
    }
    .cycle {
      display: flex;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }
    .subject {
      padding: 8px 12px;
      margin: 6px;
      border-radius: 8px;
      background-color: #e3eaf2;
      cursor: pointer;
      position: relative;
      transition: 0.2s;
      font-size: 14px;
    }
    .subject.completed {
      background-color: #b6e3b6;
      text-decoration: line-through;
    }
    .subject.locked {
      background-color: #ddd;
      cursor: not-allowed;
    }
    .subject:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: -1.5rem;
      left: 0;
      background: #333;
      color: #fff;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 12px;
      white-space: nowrap;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Medicina Veterinaria y Zootecnia</h1>
  <div id="malla"></div>
  <script>
    const data = {
      "Primer Año": {
        "Ciclo I": [
          "Matematica",
          "Filosofia General",
          "Sociologia General",
          "Quimica General",
          "Zootecnia General"
        ],
        "Ciclo II": [
          { name: "Animales y Su Ambiente" },
          { name: "Bioestadistica", depends: ["Matematica"] },
          { name: "Biofisica", depends: ["Matematica"] },
          { name: "Biologia Molecular de la Celula", depends: ["Quimica General"] },
          { name: "Quimica Organica", depends: ["Quimica General"] }
        ]
      },
      "Segundo Año": {
        "Ciclo III": [
          { name: "Anatomia Descriptiva y Diseccion I", depends: ["Biologia Molecular de la Celula"] },
          { name: "Bioquimica", depends: ["Quimica Organica"] },
          "Ingles I",
          "Metodos de Investigacion e Informatica",
          { name: "Microbiologia General", depends: ["Biologia Molecular de la Celula"] }
        ],
        "Ciclo IV": [
          { name: "Anatomia Descriptiva y Diseccion II", depends: ["Anatomia Descriptiva y Diseccion I"] },
          { name: "Bacteriologia y Micologia", depends: ["Microbiologia General"] },
          { name: "Ingles II", depends: ["Ingles I"] },
          { name: "Parasitologia", depends: ["Microbiologia General"] },
          { name: "Pastos y Forrajes", depends: ["Animales y Su Ambiente"] }
        ]
      },
      "Tercer Año": {
        "Ciclo V": [
          { name: "Anatomia Topografica", depends: ["Anatomia Descriptiva y Diseccion II"] },
          { name: "Enfermedades Parasitarias", depends: ["Parasitologia"] },
          { name: "Fisiologia General", depends: ["Bioquimica"] },
          { name: "Histologia y Embriologia Comparada", depends: ["Anatomia Descriptiva y Diseccion II"] },
          { name: "Ingles III", depends: ["Ingles II"] },
          { name: "Virologia", depends: ["Microbiologia General"] }
        ],
        "Ciclo VI": [
          { name: "Fisiologia Especial", depends: ["Fisiologia General"] },
          { name: "Ingles IV", depends: ["Ingles III"] },
          { name: "Inmunologia", depends: ["Virologia"] },
          { name: "Higiene y Profilaxis Animal", depends: ["Bacteriologia y Micologia", "Virologia"] },
          { name: "Propedeutica Tecnica", depends: ["Fisiologia General"] },
          { name: "Zootecnia de Pequeñas Especies", depends: ["Zootecnia General", "Anatomia Topografica"] }
        ]
      },
      "Cuarto Año": {
        "Ciclo VII": [
          { name: "Alimentos y Nutricion", depends: ["Fisiologia Especial"] },
          { name: "Farmacologia General", depends: ["Fisiologia Especial", "Propedeutica Tecnica"] },
          { name: "Imagenologia", depends: ["Anatomia Topografica"] },
          { name: "Produccion de pequeños rumiantes", depends: ["Higiene y Profilaxis Animal"] },
          { name: "ECONOMÍA Y  ADMINISTRACIÓN DE EMPRESAS AGROPECUARIAS", depends: ["Higiene y Profilaxis Animal"] },
          { name: "Patologia General", depends: ["Fisiologia Especial"] }
        ],
        "Ciclo VIII": [
          { name: "Tecnicas Quirurgicas", depends: ["Imagenologia", "Farmacologia General"] },
          { name: "Laboratorio Clinico", depends: ["Enfermedades Parasitarias", "Fisiologia Especial"] },
          { name: "Farmacologia Especial", depends: ["Farmacologia General"] },
          { name: "Patologia Sistemica I", depends: ["Patologia General"] },
          { name: "Seminario de Investigacion", depends: ["Metodos de Investigacion e Informatica"] }
        ]
      },
      "Quinto Año": {
        "Ciclo IX": [
          { name: "Cirugia General", depends: ["Tecnicas Quirurgicas"] },
          { name: "Epidemiologia", depends: ["Bioestadistica", "Higiene y Profilaxis Animal"] },
          { name: "Medicina y Manejo de Fauna Silvestre", depends: ["Animales y Su Ambiente", "Farmacologia Especial"] },
          { name: "Patologia Sistemica II", depends: ["Patologia Sistemica I"] },
          { name: "Produccion Acuicola y Cunicula", depends: ["ECONOMÍA Y  ADMINISTRACIÓN DE EMPRESAS AGROPECUARIAS"] }
        ],
        "Ciclo X": [
          { name: "Salud Publica Veterinaria", depends: ["Epidemiologia"] },
          { name: "Inspeccion de Productos de Origen Animal", depends: ["Higiene y Profilaxis Animal", "Patologia Sistemica II"] },
          { name: "Clinica y Produccion de Bovinos", depends: ["Farmacologia Especial", "Patologia Sistemica II"] },
          { name: "Clinica de Equinos", depends: ["Farmacologia Especial", "Patologia Sistemica II"] },
          { name: "Enfermedades Infecciosas", depends: ["Patologia Sistemica II"] }
        ]
      },
      "Sexto Año": {
        "Ciclo XI": [
          { name: "Clinica y Produccion de Cerdos", depends: ["Farmacologia Especial", "Enfermedades Infecciosas"] },
          { name: "Clinica de Pequeñas Especies", depends: ["Farmacologia Especial", "Enfermedades Infecciosas"] },
          { name: "Fisiopatologia de la Reproduccion", depends: ["Clinica y Produccion de Bovinos"] },
          { name: "Legislacion y Etica Profesional", depends: ["Salud Publica Veterinaria", "Inspeccion de Productos de Origen Animal", "Clinica y Produccion de Bovinos", "Clinica de Equinos", "Enfermedades Infecciosas"] },
          { name: "Clinica y Produccion de Aves", depends: ["Farmacologia Especial", "Enfermedades Infecciosas"] }
        ]
      }
    };

    const container = document.getElementById('malla');
    const state = JSON.parse(localStorage.getItem('malla-vet-state') || '{}');

    function saveState() {
      localStorage.setItem('malla-vet-state', JSON.stringify(state));
    }

    function createSubject(subject, allSubjects) {
      const name = typeof subject === 'string' ? subject : subject.name;
      const depends = typeof subject === 'string' ? [] : subject.depends || [];
      const div = document.createElement('div');
      div.className = 'subject';
      div.textContent = name;
      if (state[name]) div.classList.add('completed');
      allSubjects[name] = { el: div, depends };

      div.addEventListener('click', () => {
        if (div.classList.contains('locked')) return;
        div.classList.toggle('completed');
        state[name] = div.classList.contains('completed');
        saveState();
        updateSubjects();
      });
      return div;
    }

    function updateSubjects() {
      for (const key in allSubjects) {
        const subject = allSubjects[key];
        const unmet = subject.depends.filter(d => !state[d]);
        subject.el.classList.remove('locked');
        subject.el.removeAttribute('data-tooltip');
        if (unmet.length > 0) {
          subject.el.classList.add('locked');
          subject.el.setAttribute('data-tooltip', 'Requiere: ' + unmet.join(', '));
        }
      }
    }

    const allSubjects = {};

    for (const year in data) {
      const yearDiv = document.createElement('div');
      yearDiv.className = 'year';
      const yearTitle = document.createElement('h2');
      yearTitle.textContent = year;
      yearDiv.appendChild(yearTitle);

      const cycles = data[year];
      for (const cycle in cycles) {
        const cycleDiv = document.createElement('div');
        cycleDiv.className = 'cycle';
        cycles[cycle].forEach(subject => {
          const subjectDiv = createSubject(subject, allSubjects);
          cycleDiv.appendChild(subjectDiv);
        });
        const cycleTitle = document.createElement('h3');
        cycleTitle.textContent = cycle;
        yearDiv.appendChild(cycleTitle);
        yearDiv.appendChild(cycleDiv);
      }

      container.appendChild(yearDiv);
    }

    updateSubjects();
  </script>
</body>
</html>
