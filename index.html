<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>MVZ Plan 2023</title>
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      background: #f4f7f9;
      color: #333;
      padding: 20px;
    }
    h2 {
      margin-top: 30px;
      font-size: 18px;
    }
    h3 {
      font-size: 16px;
    }
    .grid {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }
    .cycle {
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      padding: 10px;
      flex: 1;
      min-width: 200px;
      font-size: 14px;
    }
    .subject {
      margin: 4px 0;
      padding: 8px;
      border-radius: 6px;
      background: #e0e7ef;
      cursor: pointer;
      position: relative;
      transition: background 0.3s;
    }
    .subject.completed {
      background: #a5d6a7;
      text-decoration: line-through;
    }
    .subject.locked {
      background: #ddd;
      cursor: not-allowed;
    }
    .subject:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 105%;
      top: 50%;
      transform: translateY(-50%);
      background: #333;
      color: #fff;
      padding: 6px;
      border-radius: 4px;
      white-space: nowrap;
      font-size: 12px;
      display: block;
    }
  </style>
</head>
<body>
  <h1>Licenciatura en Medicina Veterinaria y Zootecnia | Plan 2023 - 2028</h1>
  <div class="grid" id="malla"></div>

  <script>
   const data = {
  "Primer Año": {
    "Ciclo I": [
      "Matemática",
      "Filosofía General",
      "Sociología General",
      "Química General",
      "Zootecnia General"
    ],
    "Ciclo II": [
      { name: "Animales y su Ambiente" },
      { name: "Bioestadística", dependsOn: ["Matemática"] },
      { name: "Biofísica", dependsOn: ["Matemática"] },
      { name: "Biología Molecular de la Célula", dependsOn: ["Química General"] },
      { name: "Química Orgánica", dependsOn: ["Química General"] }
    ]
  },
  "Segundo Año": {
    "Ciclo III": [
      { name: "Anatomía Descriptiva y Disección I", dependsOn: ["Biología Molecular de la Célula"] },
      { name: "Bioquímica", dependsOn: ["Química Orgánica"] },
      "Inglés I",
      "Métodos de Investigación e Informática",
      { name: "Microbiología General", dependsOn: ["Biología Molecular de la Célula"] }
    ],
    "Ciclo IV": [
      { name: "Anatomía Descriptiva y Disección II", dependsOn: ["Anatomía Descriptiva y Disección I"] },
      { name: "Bacteriología y Micología", dependsOn: ["Microbiología General"] },
      { name: "Inglés II", dependsOn: ["Inglés I"] },
      { name: "Parasitología", dependsOn: ["Microbiología General"] },
      { name: "Pastos y Forrajes", dependsOn: ["Animales y su Ambiente"] }
    ]
  },
  "Tercer Año": {
    "Ciclo V": [
      { name: "Anatomía Topográfica", dependsOn: ["Anatomía Descriptiva y Disección II"] },
      { name: "Enfermedades Parasitarias", dependsOn: ["Parasitología"] },
      { name: "Fisiología General", dependsOn: ["Bioquímica"] },
      { name: "Histología y Embriología Comparada", dependsOn: ["Anatomía Descriptiva y Disección II"] },
      { name: "Inglés III", dependsOn: ["Inglés II"] },
      { name: "Virología", dependsOn: ["Microbiología General"] }
    ],
    "Ciclo VI": [
      { name: "Fisiología Especial", dependsOn: ["Fisiología General"] },
      { name: "Inglés IV", dependsOn: ["Inglés III"] },
      { name: "Inmunología", dependsOn: ["Virología"] },
      { name: "Higiene y Profilaxis Animal", dependsOn: ["Bacteriología y Micología", "Virología"] },
      { name: "Propedéutica Técnica", dependsOn: ["Fisiología General"] },
      { name: "Zootecnia de Pequeñas Especies", dependsOn: ["Zootecnia General", "Anatomía Topográfica"] }
    ]
  },
  "Cuarto Año": {
    "Ciclo VII": [
      { name: "Alimentos y Nutrición", dependsOn: ["Fisiología Especial"] },
      { name: "Farmacología General", dependsOn: ["Fisiología Especial", "Propedéutica Técnica"] },
      { name: "Imagenología", dependsOn: ["Anatomía Topográfica"] },
      { name: "Producción de Pequeños Rumiantes", dependsOn: ["Higiene y Profilaxis Animal"] },
      { name: "Economía y Administración de Empresas Agropecuarias", dependsOn: ["Higiene y Profilaxis Animal"] },
      { name: "Patología General", dependsOn: ["Fisiología Especial"] }
    ],
    "Ciclo VIII": [
      { name: "Técnicas Quirúrgicas", dependsOn: ["Imagenología", "Farmacología General"] },
      { name: "Laboratorio Clínico", dependsOn: ["Enfermedades Parasitarias", "Fisiología Especial"] },
      { name: "Farmacología Especial", dependsOn: ["Farmacología General"] },
      { name: "Patología Sistémica I", dependsOn: ["Patología General"] },
      { name: "Seminario de Investigación", dependsOn: ["Métodos de Investigación e Informática"] }
    ]
  },
  "Quinto Año": {
    "Ciclo IX": [
      { name: "Cirugía General", dependsOn: ["Técnicas Quirúrgicas"] },
      { name: "Epidemiología", dependsOn: ["Bioestadística", "Higiene y Profilaxis Animal"] },
      { name: "Medicina y Manejo de Fauna Silvestre", dependsOn: ["Animales y su Ambiente", "Farmacología Especial"] },
      { name: "Patología Sistémica II", dependsOn: ["Patología Sistémica I"] },
      { name: "Producción Acuícola y Cunícola", dependsOn: ["Economía y Administración de Empresas Agropecuarias"] }
    ],
    "Ciclo X": [
      { name: "Salud Pública Veterinaria", dependsOn: ["Epidemiología"] },
      { name: "Inspección de Productos de Origen Animal", dependsOn: ["Higiene y Profilaxis Animal", "Patología Sistémica II"] },
      { name: "Clínica y Producción de Bovinos", dependsOn: ["Farmacología Especial", "Patología Sistémica II"] },
      { name: "Clínica de Equinos", dependsOn: ["Farmacología Especial", "Patología Sistémica II"] },
      { name: "Enfermedades Infecciosas", dependsOn: ["Patología Sistémica II"] }
    ]
  },
  "Sexto Año": {
    "Ciclo XI": [
      { name: "Clínica y Producción de Cerdos", dependsOn: ["Farmacología Especial", "Enfermedades Infecciosas"] },
      { name: "Clínica de Pequeñas Especies", dependsOn: ["Farmacología Especial", "Enfermedades Infecciosas"] },
      { name: "Fisiopatología de la Reproducción", dependsOn: ["Clínica y Producción de Bovinos"] },
      { name: "Legislación y Ética Profesional", dependsOn: ["Salud Pública Veterinaria", "Inspección de Productos de Origen Animal", "Clínica y Producción de Bovinos", "Clínica de Equinos", "Enfermedades Infecciosas"] },
      { name: "Clínica y Producción de Aves", dependsOn: ["Farmacología Especial", "Enfermedades Infecciosas"] }
    ]
  }
};

    const container = document.getElementById("malla");
    let completed = JSON.parse(localStorage.getItem("completedSubjects") || "[]");

    function isCompleted(name) {
      return completed.includes(name);
    }

    function render() {
      container.innerHTML = "";
      for (const year in data) {
        const yearDiv = document.createElement("div");
        yearDiv.className = "cycle";
        const h2 = document.createElement("h2");
        h2.textContent = year;
        yearDiv.appendChild(h2);

        for (const cycle in data[year]) {
          const cycleDiv = document.createElement("div");
          const h3 = document.createElement("h3");
          h3.textContent = cycle;
          cycleDiv.appendChild(h3);

          data[year][cycle].forEach(subject => {
            const name = typeof subject === 'string' ? subject : subject.name;
            const depends = subject.dependsOn || [];
            const div = document.createElement("div");
            div.className = "subject";
            div.textContent = name;

            if (isCompleted(name)) {
              div.classList.add("completed");
            } else if (depends.length && !depends.every(isCompleted)) {
              div.classList.add("locked");
              div.setAttribute("data-tooltip", "Requiere: " + depends.filter(d => !isCompleted(d)).join(", "));
            }

            div.addEventListener("click", () => {
              if (div.classList.contains("locked")) return;
              if (div.classList.contains("completed")) {
                completed = completed.filter(s => s !== name);
              } else {
                completed.push(name);
              }
              localStorage.setItem("completedSubjects", JSON.stringify(completed));
              render();
            });

            cycleDiv.appendChild(div);
          });

          yearDiv.appendChild(cycleDiv);
        }

        container.appendChild(yearDiv);
      }
    }

    render();
  </script>
</body>
</html>
